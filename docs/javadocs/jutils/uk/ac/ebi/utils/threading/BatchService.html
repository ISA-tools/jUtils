<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_222) on Tue Feb 04 15:23:00 UTC 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>BatchService (JUtils - Core 8.0.1-SNAPSHOT API)</title>
<meta name="date" content="2020-02-04">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BatchService (JUtils - Core 8.0.1-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BatchService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?uk/ac/ebi/utils/threading/BatchService.html" target="_top">Frames</a></li>
<li><a href="BatchService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">uk.ac.ebi.utils.threading</div>
<h2 title="Class BatchService" class="title">Class BatchService&lt;TK extends <a href="../../../../../uk/ac/ebi/utils/threading/BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTask</a>&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>uk.ac.ebi.utils.threading.BatchService&lt;TK&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">BatchService&lt;TK extends <a href="../../../../../uk/ac/ebi/utils/threading/BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTask</a>&gt;</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block"><p>A pool-based thread execution service, that dynamically optimises its size.</p>
<p>This is a base class that allow you to manage the execution of a number of <a href="../../../../../uk/ac/ebi/utils/threading/BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading"><code>tasks</code></a> in parallel.
This is achieved by means of a thread pool, which of size is dynamically adjusted via <a href="../../../../../uk/ac/ebi/utils/threading/PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading"><code>PoolSizeTuner</code></a>, 
in order to optimise the task throughput (i.e., the number of tasks that complete their execution in the unit of time).</p>
<p>You should initialise this class with a moderate initial pool size (default is the number of available processors), 
cause the tuning algorithm works well (i.e. converges) when it approaches the best value from the left.</p>
<p>The <a href = "http://codeidol.com/java/java-concurrency/Applying-Thread-Pools/Sizing-Thread-Pools/">theory</a> 
says that the optimal number of threads is given by the number of available processors and the ratio 
between task waiting time and real CPU consumption time. However things can be more complicated when task latencies
depend on how much they communicate or interfere each other, for instance by hitting transactions on the same database.
This is the rationale to base thread optimisation on live performance measurement.</p>
<dl><dt>date</dt><dd>8 Oct 2013</dd></dl></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Marco Brandizi</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading">BatchService.BatchServiceTuner</a></span></code>
<div class="block">The custom <a href="../../../../../uk/ac/ebi/utils/threading/PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading"><code>PoolSizeTuner</code></a> that is used to optimise this service.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#lastExitCode">lastExitCode</a></span></code>
<div class="block">This should be 1 if there are multiple and different exit codes returned by submitted tasks <a href="../../../../../uk/ac/ebi/utils/threading/BatchServiceTask.html#getExitCode--"><code>BatchServiceTask.getExitCode()</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected uk.org.lidalia.slf4jext.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#log">log</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../uk/ac/ebi/utils/threading/PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#poolSizeTuner">poolSizeTuner</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#BatchService--">BatchService</a></span>()</code>
<div class="block">Defaults to <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html?is-external=true#availableProcessors--" title="class or interface in java.lang"><code>Runtime.getRuntime().availableProcessors()</code></a></div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#BatchService-int-">BatchService</a></span>(int&nbsp;initialThreadPoolSize)</code>
<div class="block">Initialises a pool service with this number of initial threads.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#finalize--">finalize</a></span>()</code>
<div class="block">Stops <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#poolSizeTuner"><code>poolSizeTuner</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#getBusyTasks--">getBusyTasks</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#getCompletedTasks--">getCompletedTasks</a></span>()</code>
<div class="block">The no of completed tasks.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#getLastExitCode--">getLastExitCode</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../uk/ac/ebi/utils/threading/PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#getPoolSizeTuner--">getPoolSizeTuner</a></span>()</code>
<div class="block">Used to dynamically adjust the no.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>uk.org.lidalia.slf4jext.Level</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#getSubmissionMsgLogLevel--">getSubmissionMsgLogLevel</a></span>()</code>
<div class="block">The submission of a new task is notified to the logging system via this level (<code>Level.INFO</code> by default).</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#getThreadPoolSize--">getThreadPoolSize</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading">BatchService.BatchServiceTuner</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#newPoolSizeTuner--">newPoolSizeTuner</a></span>()</code>
<div class="block">Allows you to initialise with a custom <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading"><code>BatchService.BatchServiceTuner</code></a>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#newThreadPoolExecutor-int-">newThreadPoolExecutor</a></span>(int&nbsp;initialThreadPoolSize)</code>
<div class="block">Allows you to initialise with a custom <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ExecutorService</code></a>.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#setSubmissionMsgLogLevel-uk.org.lidalia.slf4jext.Level-">setSubmissionMsgLogLevel</a></span>(uk.org.lidalia.slf4jext.Level&nbsp;submissionMsgLogLevel)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#setThreadFactory-java.util.concurrent.ThreadFactory-">setThreadFactory</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadFactory.html?is-external=true" title="class or interface in java.util.concurrent">ThreadFactory</a>&nbsp;threadFactory)</code>
<div class="block">It&rsquo;s like the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#setThreadFactory-java.util.concurrent.ThreadFactory-" title="class or interface in java.util.concurrent"><code>ThreadPoolExecutor.setThreadFactory(ThreadFactory)</code></a> and might be useful here as well.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#setThreadPoolSize-int-">setThreadPoolSize</a></span>(int&nbsp;threadPoolSize)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#submit-TK-">submit</a></span>(<a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html" title="type parameter in BatchService">TK</a>&nbsp;batchServiceTask)</code>
<div class="block">Submits a task into the pool, synchronising updates requested from <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#poolSizeTuner"><code>poolSizeTuner</code></a> and other internal state information.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#waitAllFinished--">waitAllFinished</a></span>()</code>
<div class="block">This can be used after you have submitted all the tasks that you have to run, when you want to wait that all of them complete their execution.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="lastExitCode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastExitCode</h4>
<pre>protected&nbsp;int lastExitCode</pre>
<div class="block"><p>This should be 1 if there are multiple and different exit codes returned by submitted tasks <a href="../../../../../uk/ac/ebi/utils/threading/BatchServiceTask.html#getExitCode--"><code>BatchServiceTask.getExitCode()</code></a>. It should be a given value if all the submitted tasks returned that same value and it is non-zero. Should be 0 in all other cases.</p></div>
</li>
</ul>
<a name="poolSizeTuner">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>poolSizeTuner</h4>
<pre>protected&nbsp;<a href="../../../../../uk/ac/ebi/utils/threading/PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a> poolSizeTuner</pre>
</li>
</ul>
<a name="log">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>log</h4>
<pre>protected&nbsp;uk.org.lidalia.slf4jext.Logger log</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BatchService--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BatchService</h4>
<pre>public&nbsp;BatchService()</pre>
<div class="block"><p>Defaults to <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html?is-external=true#availableProcessors--" title="class or interface in java.lang"><code>Runtime.getRuntime().availableProcessors()</code></a></p></div>
</li>
</ul>
<a name="BatchService-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BatchService</h4>
<pre>public&nbsp;BatchService(int&nbsp;initialThreadPoolSize)</pre>
<div class="block"><p>Initialises a pool service with this number of initial threads.</p></div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="newPoolSizeTuner--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newPoolSizeTuner</h4>
<pre>protected&nbsp;<a href="../../../../../uk/ac/ebi/utils/threading/BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading">BatchService.BatchServiceTuner</a>&nbsp;newPoolSizeTuner()</pre>
<div class="block"><p>Allows you to initialise with a custom <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading"><code>BatchService.BatchServiceTuner</code></a>. In most cases you will be fine with the default. If you need to change its tuning parameters, use the <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#poolSizeTuner"><code>poolSizeTuner</code></a> field.</p>
<p>This is called by the <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#BatchService-int-"><code>BatchService(int)</code></a> constructor (and all the others).</p></div>
</li>
</ul>
<a name="newThreadPoolExecutor-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newThreadPoolExecutor</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a>&nbsp;newThreadPoolExecutor(int&nbsp;initialThreadPoolSize)</pre>
<div class="block"><p>Allows you to initialise with a custom <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ExecutorService</code></a>. WARNING: this class was designed and tested with <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html?is-external=true#newFixedThreadPool-int-" title="class or interface in java.util.concurrent"><code>fixed pools</code></a> in mind. This method is supposed to instantiate variants of fixed thread pools, in other to accommodate specific needs. One example is when you need to give different priorities to the tasks in a pool. We have <a href="../../../../../uk/ac/ebi/utils/threading/BatchServiceTask.TaskComparator.html" title="class in uk.ac.ebi.utils.threading"><code>BatchServiceTask.TaskComparator</code></a> for that, which can be instantiated from this method this way (method inspired to <a href = 'http://tinyurl.com/jjktm53'>this</a>)): </p>
<pre>
return new ThreadPoolExecutor ( 
  initialThreadPoolSize, initialThreadPoolSize, 0L, TimeUnit.MILLISECONDS,
  new PriorityBlockingQueue<Runnable> ( initialThreadPoolSize, new BatchServiceTask.TaskComparator () )
);
</pre>
<p>Use executors other than fixed pool size at your own risk!</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>initialThreadPoolSize</code> - the initial thread pool size.</dd>
</dl>
</li>
</ul>
<a name="submit-uk.ac.ebi.utils.threading.BatchServiceTask-">
<!--   -->
</a><a name="submit-TK-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submit</h4>
<pre>public&nbsp;void&nbsp;submit(<a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html" title="type parameter in BatchService">TK</a>&nbsp;batchServiceTask)</pre>
<div class="block"><p>Submits a task into the pool, synchronising updates requested from <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#poolSizeTuner"><code>poolSizeTuner</code></a> and other internal state information.</p></div>
</li>
</ul>
<a name="waitAllFinished--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitAllFinished</h4>
<pre>public&nbsp;void&nbsp;waitAllFinished()</pre>
<div class="block"><p>This can be used after you have submitted all the tasks that you have to run, when you want to wait that all of them complete their execution. The method starts a <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#initNotificationTimer--"><code>timer</code></a> that reports the current state (with INFO log messages).</p></div>
</li>
</ul>
<a name="getCompletedTasks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCompletedTasks</h4>
<pre>public&nbsp;long&nbsp;getCompletedTasks()</pre>
<div class="block"><p>The no of completed tasks. This method is not synchronised, so you might get a number slightly lower than the real one.</p></div>
</li>
</ul>
<a name="getPoolSizeTuner--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPoolSizeTuner</h4>
<pre>public&nbsp;<a href="../../../../../uk/ac/ebi/utils/threading/PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a>&nbsp;getPoolSizeTuner()</pre>
<div class="block"><p>Used to dynamically adjust the no. threads that the service runs in parallel. Most cases you will be fine with the <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading"><code>default implementation of this</code></a>. If not, you should set this field in a<br/><code>constructor</code>.</p></div>
</li>
</ul>
<a name="getThreadPoolSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getThreadPoolSize</h4>
<pre>public&nbsp;int&nbsp;getThreadPoolSize()</pre>
</li>
</ul>
<a name="setThreadPoolSize-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setThreadPoolSize</h4>
<pre>public&nbsp;void&nbsp;setThreadPoolSize(int&nbsp;threadPoolSize)</pre>
</li>
</ul>
<a name="getLastExitCode--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastExitCode</h4>
<pre>public&nbsp;int&nbsp;getLastExitCode()</pre>
</li>
</ul>
<a name="getBusyTasks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBusyTasks</h4>
<pre>public&nbsp;int&nbsp;getBusyTasks()</pre>
</li>
</ul>
<a name="getSubmissionMsgLogLevel--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSubmissionMsgLogLevel</h4>
<pre>public&nbsp;uk.org.lidalia.slf4jext.Level&nbsp;getSubmissionMsgLogLevel()</pre>
<div class="block"><p>The submission of a new task is notified to the logging system via this level (<code>Level.INFO</code> by default).</p>
<p>If your application has very many tasks and you don&rsquo;t want to get bothered with these messages, you can change the log granularity here. If the level you set is disabled, this class will instead log a <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#initNotificationTimer--"><code>notification</code></a> from time to time.</p></div>
</li>
</ul>
<a name="setSubmissionMsgLogLevel-uk.org.lidalia.slf4jext.Level-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSubmissionMsgLogLevel</h4>
<pre>public&nbsp;void&nbsp;setSubmissionMsgLogLevel(uk.org.lidalia.slf4jext.Level&nbsp;submissionMsgLogLevel)</pre>
</li>
</ul>
<a name="setThreadFactory-java.util.concurrent.ThreadFactory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setThreadFactory</h4>
<pre>public&nbsp;void&nbsp;setThreadFactory(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadFactory.html?is-external=true" title="class or interface in java.util.concurrent">ThreadFactory</a>&nbsp;threadFactory)</pre>
<div class="block"><p>It&rsquo;s like the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#setThreadFactory-java.util.concurrent.ThreadFactory-" title="class or interface in java.util.concurrent"><code>ThreadPoolExecutor.setThreadFactory(ThreadFactory)</code></a> and might be useful here as well.</p></div>
</li>
</ul>
<a name="finalize--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()
                 throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a></pre>
<div class="block"><p>Stops <a href="../../../../../uk/ac/ebi/utils/threading/BatchService.html#poolSizeTuner"><code>poolSizeTuner</code></a>.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BatchService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><script type="text/javascript" src="../../../../../highlight.pack.js"></script>
<script type="text/javascript"><!--
hljs.initHighlightingOnLoad();
//--></script></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../uk/ac/ebi/utils/threading/BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?uk/ac/ebi/utils/threading/BatchService.html" target="_top">Frames</a></li>
<li><a href="BatchService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2020. All rights reserved.</small></p>
</body>
</html>
