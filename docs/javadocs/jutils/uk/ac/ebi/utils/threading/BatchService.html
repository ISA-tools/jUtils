<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.2) on Thu Jul 09 13:44:02 UTC 2020 -->
<title>BatchService (JUtils - Core 10.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-07-09">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BatchService (JUtils - Core 10.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BatchService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">uk.ac.ebi.utils.threading</a></div>
<h2 title="Class BatchService" class="title">Class BatchService&lt;TK extends <a href="BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTask</a>&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>uk.ac.ebi.utils.threading.BatchService&lt;TK&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">BatchService&lt;TK extends <a href="BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTask</a>&gt;</span>
extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block"><p>A pool-based thread execution service, that dynamically optimises its size.</p>
 
 <p>This is a base class that allow you to manage the execution of a number of <a href="BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading"><code>tasks</code></a> in parallel.
 This is achieved by means of a thread pool, which of size is dynamically adjusted via <a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading"><code>PoolSizeTuner</code></a>, 
 in order to optimise the task throughput (i.e., the number of tasks that complete their execution in the unit of time).</p>

 <p>You should initialise this class with a moderate initial pool size (default is the number of available processors), 
 cause the tuning algorithm works well (i.e. converges) when it approaches the best value from the left.</p>
 
 <p>The <a href="http://codeidol.com/java/java-concurrency/Applying-Thread-Pools/Sizing-Thread-Pools/">theory</a> 
 says that the optimal number of threads is given by the number of available processors and the ratio 
 between task waiting time and real CPU consumption time. However things can be more complicated when task latencies
 depend on how much they communicate or interfere each other, for instance by hitting transactions on the same database.
 This is the rationale to base thread optimisation on live performance measurement.</p> 
 
 <dl><dt>date</dt><dd>8 Oct 2013</dd></dl></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Marco Brandizi</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading">BatchService.BatchServiceTuner</a></span></code></th>
<td class="colLast">
<div class="block">The custom <a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading"><code>PoolSizeTuner</code></a> that is used to optimise this service.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lastExitCode">lastExitCode</a></span></code></th>
<td class="colLast">
<div class="block">This should be 1 if there are multiple and different exit codes returned by submitted tasks <a href="BatchServiceTask.html#getExitCode()"><code>BatchServiceTask.getExitCode()</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected uk.org.lidalia.slf4jext.Logger</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#log">log</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#poolSizeTuner">poolSizeTuner</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">BatchService</a></span>()</code></th>
<td class="colLast">
<div class="block">Defaults to <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runtime.html?is-external=true#availableProcessors()" title="class or interface in java.lang" class="externalLink"><code>Runtime.getRuntime().availableProcessors()</code></a></div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(int)">BatchService</a></span>&#8203;(int&nbsp;initialThreadPoolSize)</code></th>
<td class="colLast">
<div class="block">Initialises a pool service with this number of initial threads.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#finalize()">finalize</a></span>()</code></th>
<td class="colLast">
<div class="block">Stops <a href="#poolSizeTuner"><code>poolSizeTuner</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBusyTasks()">getBusyTasks</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCompletedTasks()">getCompletedTasks</a></span>()</code></th>
<td class="colLast">
<div class="block">The no of completed tasks.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastExitCode()">getLastExitCode</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPoolSizeTuner()">getPoolSizeTuner</a></span>()</code></th>
<td class="colLast">
<div class="block">Used to dynamically adjust the no.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>uk.org.lidalia.slf4jext.Level</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSubmissionMsgLogLevel()">getSubmissionMsgLogLevel</a></span>()</code></th>
<td class="colLast">
<div class="block">The submission of a new task is notified to the logging system via this level (<code>Level.INFO</code> by default).</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getThreadPoolSize()">getThreadPoolSize</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected <a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading">BatchService.BatchServiceTuner</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newPoolSizeTuner()">newPoolSizeTuner</a></span>()</code></th>
<td class="colLast">
<div class="block">Allows you to initialise with a custom <a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading"><code>BatchService.BatchServiceTuner</code></a>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink">ExecutorService</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newThreadPoolExecutor(int)">newThreadPoolExecutor</a></span>&#8203;(int&nbsp;initialThreadPoolSize)</code></th>
<td class="colLast">
<div class="block">Allows you to initialise with a custom <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink"><code>ExecutorService</code></a>.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setSubmissionMsgLogLevel(uk.org.lidalia.slf4jext.Level)">setSubmissionMsgLogLevel</a></span>&#8203;(uk.org.lidalia.slf4jext.Level&nbsp;submissionMsgLogLevel)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setThreadFactory(java.util.concurrent.ThreadFactory)">setThreadFactory</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ThreadFactory.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink">ThreadFactory</a>&nbsp;threadFactory)</code></th>
<td class="colLast">
<div class="block">It's like the <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#setThreadFactory(java.util.concurrent.ThreadFactory)" title="class or interface in java.util.concurrent" class="externalLink"><code>ThreadPoolExecutor.setThreadFactory(ThreadFactory)</code></a> and might be useful here as well.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setThreadPoolSize(int)">setThreadPoolSize</a></span>&#8203;(int&nbsp;threadPoolSize)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#submit(TK)">submit</a></span>&#8203;(<a href="BatchService.html" title="type parameter in BatchService">TK</a>&nbsp;batchServiceTask)</code></th>
<td class="colLast">
<div class="block">Submits a task into the pool, synchronising updates requested from <a href="#poolSizeTuner"><code>poolSizeTuner</code></a> and other internal 
 state information.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waitAllFinished()">waitAllFinished</a></span>()</code></th>
<td class="colLast">
<div class="block">This can be used after you have submitted all the tasks that you have to run, when you want to wait that all of them 
 complete their execution.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="lastExitCode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastExitCode</h4>
<pre>protected&nbsp;int lastExitCode</pre>
<div class="block">This should be 1 if there are multiple and different exit codes returned by submitted tasks <a href="BatchServiceTask.html#getExitCode()"><code>BatchServiceTask.getExitCode()</code></a>.
 It should be a given value if all the submitted tasks returned that same value and it is non-zero.
 Should be 0 in all other cases.</div>
</li>
</ul>
<a id="poolSizeTuner">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>poolSizeTuner</h4>
<pre>protected&nbsp;<a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a> poolSizeTuner</pre>
</li>
</ul>
<a id="log">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>log</h4>
<pre>protected&nbsp;uk.org.lidalia.slf4jext.Logger log</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BatchService</h4>
<pre>public&nbsp;BatchService()</pre>
<div class="block">Defaults to <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runtime.html?is-external=true#availableProcessors()" title="class or interface in java.lang" class="externalLink"><code>Runtime.getRuntime().availableProcessors()</code></a></div>
</li>
</ul>
<a id="&lt;init&gt;(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BatchService</h4>
<pre>public&nbsp;BatchService&#8203;(int&nbsp;initialThreadPoolSize)</pre>
<div class="block">Initialises a pool service with this number of initial threads.</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="newPoolSizeTuner()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newPoolSizeTuner</h4>
<pre class="methodSignature">protected&nbsp;<a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading">BatchService.BatchServiceTuner</a>&nbsp;newPoolSizeTuner()</pre>
<div class="block">Allows you to initialise with a custom <a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading"><code>BatchService.BatchServiceTuner</code></a>. In most cases you will be fine with the default. 
 If you need to change its tuning parameters, use the <a href="#poolSizeTuner"><code>poolSizeTuner</code></a> field.
 
 This is called by the <a href="#%3Cinit%3E(int)"><code>BatchService(int)</code></a> constructor (and all the others).</div>
</li>
</ul>
<a id="newThreadPoolExecutor(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newThreadPoolExecutor</h4>
<pre class="methodSignature">protected&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink">ExecutorService</a>&nbsp;newThreadPoolExecutor&#8203;(int&nbsp;initialThreadPoolSize)</pre>
<div class="block">Allows you to initialise with a custom <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink"><code>ExecutorService</code></a>. WARNING: this class was designed and tested with
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Executors.html?is-external=true#newFixedThreadPool(int)" title="class or interface in java.util.concurrent" class="externalLink"><code>fixed pools</code></a> in mind. This method is supposed to instantiate variants
 of fixed thread pools, in other to accommodate specific needs. One example is when you need to give different 
 priorities to the tasks in a pool. We have <a href="BatchServiceTask.TaskComparator.html" title="class in uk.ac.ebi.utils.threading"><code>BatchServiceTask.TaskComparator</code></a> for that, which can be instantiated from this
 method this way (method inspired to <a href='http://tinyurl.com/jjktm53'>this</a>)): 
 
 <pre>
 return new ThreadPoolExecutor ( 
   initialThreadPoolSize, initialThreadPoolSize, 0L, TimeUnit.MILLISECONDS,
   new PriorityBlockingQueue<Runnable> ( initialThreadPoolSize, new BatchServiceTask.TaskComparator () )
 );
 </pre>
 
 Use executors other than fixed pool size at your own risk!</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>initialThreadPoolSize</code> - the initial thread pool size.</dd>
</dl>
</li>
</ul>
<a id="submit(uk.ac.ebi.utils.threading.BatchServiceTask)">
<!--   -->
</a><a id="submit(TK)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submit</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;submit&#8203;(<a href="BatchService.html" title="type parameter in BatchService">TK</a>&nbsp;batchServiceTask)</pre>
<div class="block">Submits a task into the pool, synchronising updates requested from <a href="#poolSizeTuner"><code>poolSizeTuner</code></a> and other internal 
 state information.</div>
</li>
</ul>
<a id="waitAllFinished()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitAllFinished</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;waitAllFinished()</pre>
<div class="block">This can be used after you have submitted all the tasks that you have to run, when you want to wait that all of them 
 complete their execution. The method starts a <a href="#initNotificationTimer()"><code>timer</code></a> that reports the current state (with INFO log messages).</div>
</li>
</ul>
<a id="getCompletedTasks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCompletedTasks</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getCompletedTasks()</pre>
<div class="block">The no of completed tasks. This method is not synchronised, so you might get a number slightly lower than the real
 one.</div>
</li>
</ul>
<a id="getPoolSizeTuner()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPoolSizeTuner</h4>
<pre class="methodSignature">public&nbsp;<a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a>&nbsp;getPoolSizeTuner()</pre>
<div class="block">Used to dynamically adjust the no. threads that the service runs in parallel. Most cases you will be fine with 
 the <a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading"><code>default implementation of this</code></a>. If not, you should set this field in a  
 <code>constructor</code>.</div>
</li>
</ul>
<a id="getThreadPoolSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getThreadPoolSize</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getThreadPoolSize()</pre>
</li>
</ul>
<a id="setThreadPoolSize(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setThreadPoolSize</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setThreadPoolSize&#8203;(int&nbsp;threadPoolSize)</pre>
</li>
</ul>
<a id="getLastExitCode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastExitCode</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getLastExitCode()</pre>
</li>
</ul>
<a id="getBusyTasks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBusyTasks</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getBusyTasks()</pre>
</li>
</ul>
<a id="getSubmissionMsgLogLevel()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSubmissionMsgLogLevel</h4>
<pre class="methodSignature">public&nbsp;uk.org.lidalia.slf4jext.Level&nbsp;getSubmissionMsgLogLevel()</pre>
<div class="block">The submission of a new task is notified to the logging system via this level (<code>Level.INFO</code> by default).
 
 If your application has very many tasks and you don't want to get bothered with these messages, you can 
 change the log granularity here. If the level you set is disabled, this class will instead log 
 a <a href="#initNotificationTimer()"><code>notification</code></a> from time to time.</div>
</li>
</ul>
<a id="setSubmissionMsgLogLevel(uk.org.lidalia.slf4jext.Level)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSubmissionMsgLogLevel</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setSubmissionMsgLogLevel&#8203;(uk.org.lidalia.slf4jext.Level&nbsp;submissionMsgLogLevel)</pre>
</li>
</ul>
<a id="setThreadFactory(java.util.concurrent.ThreadFactory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setThreadFactory</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setThreadFactory&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ThreadFactory.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink">ThreadFactory</a>&nbsp;threadFactory)</pre>
<div class="block">It's like the <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#setThreadFactory(java.util.concurrent.ThreadFactory)" title="class or interface in java.util.concurrent" class="externalLink"><code>ThreadPoolExecutor.setThreadFactory(ThreadFactory)</code></a> and might be useful here as well.</div>
</li>
</ul>
<a id="finalize()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finalize</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;finalize()
                 throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Throwable</a></pre>
<div class="block">Stops <a href="#poolSizeTuner"><code>poolSizeTuner</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Throwable</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BatchService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2020. All rights reserved.</small></p>
</footer>
</body>
</html>
